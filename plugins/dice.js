const[e,t,l,n,o,a,s,d,i]=await Promise.all(["/lib/dom.js","/lib/html.js","/lib/misc.js","/lib/svg.js","/language.js","/messaging.js","/rpc.js","/shared.js","/tools.js"].map(include)),r=o.makeLangPack({CLEAR:"Clear Rolls",DICE:"Dice",DICE_ROLLED:"Rolled",MAX:"Max",MIN:"Min",NUMBER:"Number to Roll",RESULT:"Result",ROLL:"Roll!",SEND_TO_USER:"Send to User",TITLE:"Dice Roller",TOTAL:"Total"}),c=n.svg({viewBox:"0 0 50 58"},n.path({d:"M24,1 L0,13 0,42 7,38 0,13 24,8 48,13 41,38 49,42 48,13 24,1 24,8 7,38 41,38 24,8 M7,38 L24,57 0,42 M41,38 L24,57 49,42",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}));if(s.isAdmin){const n=t.input({type:"number",min:1,max:100,value:6,onkeypress:d.enterKey}),o=t.input({type:"number",min:1,max:100,value:1,onkeypress:d.enterKey}),a=t.input({type:"checkbox"}),m=t.tbody(),p=t.table({style:"display: none"},[t.thead(t.tr([t.th(r.DICE_ROLLED),t.th(r.TOTAL),t.th(r.MIN),t.th(r.MAX),t.th(r.RESULT)])),m]),u=t.button({style:"display: none",onclick:()=>{e.amendNode(p,{style:{display:"none"}}),e.clearNode(m),e.amendNode(u,{style:{display:"none"}})}},r.CLEAR);i.addTool({name:r.TITLE,id:"tool_dice",icon:c,options:t.div([d.labels([r.DICE,": "],n),t.br(),d.labels([r.NUMBER,": "],o),t.br(),d.labels([r.SEND_TO_USER,": "],a),t.br(),t.button({onclick:()=>{const d=l.checkInt(parseInt(o.value),1,1/0,6),i=l.checkInt(parseInt(n.value),1,1/0,1),r=Array.from({length:d},(()=>Math.ceil(Math.random()*i))),c=r.reduce(((e,t)=>e+t))+"";e.amendNode(p,{style:{display:void 0}}),e.amendNode(m,t.tr([t.td(`${d}d${i}`),t.td(c),t.td(Math.min(...r)+""),t.td(Math.max(...r)+""),t.td(r+"")])),e.amendNode(u,{style:{display:void 0}}),a.checked&&s.rpc.broadcastWindow("plugin-dice",0,`${d}d${i}: ${r} = ${c}`)}},r.ROLL),p,u])})}else a.register("plugin-dice",[n.svgData(c),r.TITLE]);